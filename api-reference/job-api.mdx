---
title: Job API
excludeFromToc: true
---



# Job Post API

## Create Job Post

Endpoint to create a job post for a specific business.

### Endpoint

`POST /api/job/create/:business_id`

### Request Headers

- `authorization`: User authentication token.

### URL Parameters

- `business_id` (string): ID of the business for which the job post is created.

### Request Parameters

#### Input Parameters

- `job_title` (string): Title of the job post.
- `business_location_id` (string, optional): ID of the business location for the job post.
- `work_exp_from` (string, optional): Minimum required work experience.
- `work_exp_to` (string, optional): Maximum required work experience.
- `workplace_type` (string, optional): Type of workplace.
- `job_type` (string, optional): Type of job (e.g., full-time, part-time).
- `description` (string, optional): Job post description.
- `description_img` (string, optional): Image URL for job post description.
- `status` (string, optional): Status of the job post (e.g., active, inactive).

### Middleware

The endpoint utilizes middleware for input validation.

#### Validation

The middleware employs Express Validator to validate the input parameters, including the job title, business ID, and optional parameters for work experience, workplace type, job type, description, description image, and status. Validation includes checking for empty values and ensuring the validity of the business location ID if provided.

### Request Body

```json
{
    "job_title": "Test Junior Manager",
    "business_location_id": "65bcc4eb492a720b902eb5b5",
    "experience": 1,
    "workplace_type": 1,
    "job_type": 1,
    "specialization_id": "65b8c4ed5c60878b99602caa",
    "salary": "30k",
    "description": "Lorem ipsum dolor sit amet.",
    "description_img": "images/photo.jpeg"
}
```

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "job_title": "Test Junior Manager",
        "business_id": "65bcc4eb492a720b902eb5a8",
        "business_location_id": "65bcc4eb492a720b902eb5b5",
        "experience": 1,
        "workplace_type": 1,
        "job_type": 1,
        "salary": 0,
        "specialization_id": "65b8c4ed5c60878b99602caa",
        "description": "Lorem ipsum dolor sit amet.",
        "description_img": "images/photo.jpeg",
        "status": 0,
        "verified": false,
        "deleted": false,
        "created_by": "65bcc4ea492a720b902eb5a2",
        "updated_by": "65bcc4ea492a720b902eb5a2",
        "created_at": "2024-02-02T10:37:18.220Z",
        "updated_at": "2024-02-02T10:37:18.220Z",
        "_id": "65bcc5de492a720b902eb5d2",
        "__v": 0
    },
    "msg": "Job post create successfully"
}
```

Job Title Already Exist:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "Job title already exist"
}

```

Business Location Not Found:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "Business location not found"
}

```

You Are Not Allowed:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "You are not allowed to create a job post for this business"
}
```





# Send OTP for Job Post Verification API

## Endpoint

`POST /api/job/post/send-otp`

This endpoint is used to send an OTP for verifying a job post via email.

### Request

#### Headers

- `authorization`: Authorization token.

#### Body

- `job_id` (required): The ID of the job post to verify. Should be a valid MongoDB ObjectID with a length of 24 characters.
- `email_id` (required): The email address where the OTP will be sent.

### Response

- Status: 200 OK if the OTP is successfully sent, error status otherwise.
- Body: JSON response indicating the result of the OTP sending operation.

### Validation

- The `authorization` header must be included in the request.
- The `job_id` parameter must be provided in the request body and should be a valid MongoDB ObjectID with a length of 24 characters.
- The `email_id` parameter must be provided in the request body.

### Notes

- This endpoint sends an OTP to the provided email address for verifying a job post.
- The OTP is sent only if the user making the request exists and is associated with the job's business.
- If the job or business does not exist, or the user is not a member of the business, appropriate error messages are returned in the response.

---
### Request Body

```json
{
    "job_id": "65bc9a4f31e4bb6a9aed7d6c",
    "email_id": "owner.business@gmail.com"
}
```

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {},
    "msg": "Otp sent to your email id"
}
```

Email id not matched:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Business email id not matched"
}
```

Business Not Found:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "Business not found"
}

```

You Are Not Allowed:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "You are not member of this business"
}
```




# Verify OTP for Job Post API

## Endpoint

`POST /api/job/post/verify-otp`

This endpoint is used to verify a job post using an OTP sent to an email address.

### Request

#### Headers

- `authorization`: Authorization token.

#### Body

- `job_id` (required): The ID of the job post to verify. Should be a valid MongoDB ObjectID with a length of 24 characters.
- `email_id` (required): The email address where the OTP was sent.
- `otp` (required): The OTP received via email.

### Response

- Status: 200 OK if the job post is successfully verified, error status otherwise.
- Body: JSON response indicating the result of the verification operation.

### Validation

- The `authorization` header must be included in the request.
- The `job_id` parameter must be provided in the request body and should be a valid MongoDB ObjectID with a length of 24 characters.
- The `email_id` parameter must be provided in the request body.
- The `otp` parameter must be provided in the request body and should be numeric.

### Notes

- This endpoint verifies a job post using the OTP sent to the specified email address.
- The job post is considered verified if the OTP provided matches the OTP sent for the job post.
- If the job, business, or user does not exist, or if the OTP is invalid or not generated for the specified email address, appropriate error messages are returned in the response.

---

### Request Body

```json
{
    "job_id": "65bc9a4f31e4bb6a9aed7d6c",
    "email_id": "owner.business@gmail.com",
    "otp": 1234
}
```

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "_id": "65bc9a4f31e4bb6a9aed7d5b",
        "job_title": "Test Case Manager",
        "business_id": "65bc8b03ee10fd14593b0cfb",
        "business_location_id": "65bc8b03ee10fd14593b0d08",
        "experience": 1,
        "workplace_type": 1,
        "job_type": 1,
        "salary": 0,
        "specialization_id": "65b8c4ed5c60878b99602caa",
        "description": "Lorem ipsum dolor sit amet.",
        "description_img": "images/photo.jpeg",
        "status": 0,
        "verified": true,
        "deleted": false,
        "created_by": "65bc7b14bf1407cea573a9c6",
        "updated_by": "65bc7b14bf1407cea573a9c6",
        "created_at": "2024-02-02T07:31:27.815Z",
        "updated_at": "2024-02-09T09:54:52.163Z",
        "__v": 0,
        "active": true,
        "promoted": false
    },
    "msg": "Job post verified successfully"
}
```

Email id not matched:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Business email id not matched"
}
```

Business Not Found:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "Business not found"
}

```

You Are Not Allowed:

```json
{
  "status": 200,
  "err": 1,
  "data": {},
  "msg": "You are not member of this business"
}
```






# List Job API

## Endpoint

`GET /api/job/list/:business_id/:start/:limit/:current_opening`

This endpoint retrieves a list of jobs associated with a specific business.

### Request

- Headers
  - `authorization`: Authorization token for the authenticated user.

- Parameters
  - `business_id`: ID of the business to fetch jobs from.
  - `start`: Starting index for pagination.
  - `limit`: Maximum number of jobs to retrieve.
  - `current_opening`: Filter for current job openings (true/false).

### Response

- Status:
  - 200 OK if the operation is successful.
  - Error status codes for failures.

- Body: JSON response containing the list of jobs.
  - If jobs are found, they are returned in the response.
  - If no jobs are available, an empty array is returned.

### Notes

- Authentication is required via the `authorization` header.
- Pagination is supported using the `start` and `limit` parameters.
- The `current_opening` parameter filters jobs based on their current availability.
- The response includes a list of jobs if available.
- Error messages are returned for scenarios such as unauthorized access, invalid business ID, or internal server errors.

---

### Request Body Example
N/A (This is a GET request)

### Success Response Example

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_job": 4,
        "job_list": [
            {
                "business_name": "Thai Bar",
                "_id": "65bc9a4f31e4bb6a9aed7d5b",
                "job_title": "Test Case Manager",
                "salary": 30,
                "created_at": "2024-02-02T07:31:27.815Z",
                "updated_at": "2024-02-21T11:23:38.917Z",
                "active": false,
                "promoted": false,
                "location": "65bb44cdc384371c9b8f3376",
                "location_name": "Bangkok, Thailand"
            },
            // ... more job posts
            
        ]
    },
    "msg": "Here is the list of available jobs."
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

User does not have permission to view job posts for this business

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not allowed to view job posts for this business"
}
```

No job posts found

```json
{
    "status": 200,
    "err": 1,
    "data": [],
    "msg": "No job posts found"
}
```

### If business id is not valid

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Sorry, the business does not exist."
}
```

### If business id not provide in param:

```json
{
    "status": 406,
    "err": 1,
    "data": {
        "errors": [
            {
                "type": "field",
                "value": ":business_id",
                "msg": "Please vaild business id",
                "path": "business_id",
                "location": "params"
            }
        ]
    },
    "msg": "Please Enter All Fields"
}
```





# View Job Post API

## Endpoint

`GET /api/job/view/:job_id`

This endpoint is used to retrieve details of a specific job post.

### Request Headers
- **Authorization:** Bearer type JWT token for authentication.

### URL Parameters
- `job_id` (string): ID of the job post to view.

### Middleware
This middleware function `viewPostMid` is responsible for validating the incoming request to view a specific job post. It checks the presence and format of required fields in the request, and ensures that the request is authenticated with a valid authorization header.

### Validation
- Validates request parameters using express-validator.
- Responds with appropriate error messages if validation fails.

### Job Post Viewing Process

Controller function `VIEW_POST` retrieves details of a specific job post. It validates user existence, checks if the user has permission to view the job post, and then fetches the job post details.

### Request Body Example
N/A (This is a GET request)

### Success Response Example

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "_id": "job_id",
        "business_name": "Business Name",
        "job_title": "Job Title",
        "salary": "Salary",
        "description_img": "Image URL",
        "created_at": "2024-01-25T07:15:44.523Z",
        "updated_at": "2024-01-25T07:15:44.523Z",
        // ... other job details
    },
    "msg": "Job data"
}
```
User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

Job post does not exist

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Job post not exist"
}
```

User does not have permission to view this job post

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not allowed to view this job post"
}
```




# Update Job Post API

## Endpoint

`POST /api/job/update/:job_id`

This endpoint is used to update details of a specific job post.

### Request Headers
- **Authorization:** Bearer type JWT token for authentication.

### URL Parameters
- `job_id` (string): ID of the job post to update.

### Middleware
This middleware function `updatePostMid` is responsible for validating the incoming request to update a specific job post. It checks the presence and format of required fields in the request, and ensures that the request is authenticated with a valid authorization header.

### Validation
- Validates request parameters using express-validator.
- Responds with appropriate error messages if validation fails.

### Job Post Updating Process

Controller function `UPDATE_POST` updates details of a specific job post. It validates user existence, checks if the user has permission to update the job post, and then updates the job post details.

### Request Body Example

```json
{
    "job_title": "Test Supervisor",
    "experience": 1,
    "workplace_type": 1,
    "job_type": 1,
    "salary": 30,
    "description": "Lorem ipsum dolor sit amet.",
    "description_img": "images/photo.jpeg"
}
```

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "_id": "65bc9a4f31e4bb6a9aed7d5b",
        "job_title": "Test Supervisor",
        "business_id": "65bc8b03ee10fd14593b0cfb",
        "business_location_id": "65bc8b03ee10fd14593b0d08",
        "experience": 1,
        "workplace_type": 1,
        "job_type": 1,
        "salary": 30,
        "specialization_id": null,
        "description": "Lorem ipsum dolor sit amet.",
        "description_img": "images/photo.jpeg",
        "status": 0,
        "verified": false,
        "deleted": false,
        "created_by": "65bc7b14bf1407cea573a9c6",
        "updated_by": "65bc7b14bf1407cea573a9c6",
        "created_at": "2024-02-02T07:31:27.815Z",
        "updated_at": "2024-02-02T12:49:50.489Z",
        "__v": 0
    },
    "msg": "Job updated"
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

Job post does not exist

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Job post not exist"
}
```

Job title already exists

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Job title already exists"
}
```

User does not have permission to update this job post

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not allowed to update this job post"
}
```






# List Job Categories API

## Endpoint

`GET /api/job/category/list`

This endpoint retrieves a list of job categories along with their associated specializations.

### Response

- Status:
  - 200 OK if the operation is successful.
  - Error status codes for failures.

- Body: JSON response containing the list of job categories and their specializations.
  - If categories are found, they are returned in the response along with their specializations.
  - If no categories are available, an empty array is returned.

### Notes

- This API endpoint does not support pagination or filtering.
- The response includes a list of job categories with their associated specializations if available.
- Error messages are returned for scenarios such as unauthorized access or internal server errors.

----

### Success Response (200 OK)

```json

{
    "status": 200,
    "err": 0,
    "data": [
        {
            "_id": "65b8c331d3aa1143d135b72c",
            "deleted": false,
            "__v": 0,
            "category_name": "Retail",
            "specialization": [
                {
                    "_id": "65b8c4d05c60878b99602ca8",
                    "specialization_name": "Store Operations",
                    "deleted": false,
                    "__v": 0,
                    "category_id": "65b8c331d3aa1143d135b72c"
                },
                //...more specializations
            ]
        },
        //...more categories
    ],
    "msg": "Here is the list of available categories."
}

```






# List Job Specializations API

## Endpoint

`GET /api/job/specialization/list/:category_id`

This endpoint retrieves a list of job specializations associated with a specific category.

### Request

- Parameters
  - `category_id`: ID of the category to fetch specializations from.

### Response

- Status:
  - 200 OK if the operation is successful.
  - Error status codes for failures.

- Body: JSON response containing the list of job specializations.
  - If specializations are found for the given category, they are returned in the response.
  - If no specializations are available or the category ID is invalid, an empty array is returned.

### Notes

- The `category_id` parameter is used to specify the category for which specializations are requested.
- The response includes a list of job specializations if available for the specified category.
- Error messages are returned for scenarios such as unauthorized access, invalid category ID, or internal server errors.

----

### Success Response (200 OK)

```json
{
    "status": 200,
    "err": 0,
    "data": [
        {
            "_id": "65b8c4d05c60878b99602ca8",
            "specialization_name": "Store Operations",
            "deleted": false,
            "__v": 0,
            "category_id": "65b8c331d3aa1143d135b72c"
        },
        {
            "_id": "65b8c4ed5c60878b99602caa",
            "specialization_name": "Sales and Customer Service",
            "deleted": false,
            "__v": 0,
            "category_id": "65b8c331d3aa1143d135b72c"
        },
        //...more specializations 
    ],
    "msg": "Here is the list of available specializations."
}
```

### If category id not provide in param:

```json
{
    "status": 406,
    "err": 1,
    "data": {
        "errors": [
            {
                "type": "field",
                "value": ":category_id",
                "msg": "Please vaild category id",
                "path": "category_id",
                "location": "params"
            }
        ]
    },
    "msg": "Please Enter All Fields"
}
```

### If category id is not valid

```json
{
    "status": 200,
    "err": 1,
    "data": [],
    "msg": "Sorry, the category list could not be found."
}
```






# Applicant List API

## Endpoint

`GET /api/job/applicant/list/:job_id/:new_application/:start/:limit`

This endpoint retrieves a list of applicants for a specific job.

### Request

- Parameters
  - `job_id`: ID of the job for which applicants are listed.
  - `new_application`: Filter for new applications (true/false).
  - `start`: Starting index for pagination.
  - `limit`: Maximum number of applicants to retrieve.

### Response

- Status:
  - 200 OK if the operation is successful.
  - Error status codes for failures.

- Body: JSON response containing the list of applicants.
  - If applicants are found, they are returned in the response.
  - If no applicants are available, an empty array is returned.

### Notes

- The `new_application` parameter filters applicants based on their application status.
- Pagination is supported using the `start` and `limit` parameters.
- The response includes a list of applicants if available.
- Error messages are returned for scenarios such as invalid job ID, unauthorized access, or internal server errors.


#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_applicant": 2,
        "applicant_list": [
            {
                "_id": "65dc343373d835038109bcf7",
                "status": 3,
                "reviewed_by_company": "2024-02-21T10:34:16.421Z",
                "applicant_id": "65bc8a08ee10fd14593b0ce5",
                "user_name": "Test Chaisom Test Anand",
                "mobile_no": "+66 111111111",
                "user_email": "job_seeker@gmail.com",
                "profile_img": "1706529737205_eb411d0102e4a8d022362810cbbcd1cd.jpeg",
                "skills": [
                    "Supervision",
                    "Data analysis",
                    "Management"
                ]
            },
            // ... other applicant
        ]
    },
    "msg": "List of applicants."
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

Job post does not exist

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "No applicants found."
}
```

User does not have permission for applicant list:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not member of this business"
}
```





# Applicant View API

## Endpoint

`GET /api/job/applicant/view/:_id`

This endpoint retrieves detailed information about a specific job applicant.

### Request

#### Parameters

- `applicant_id`: The ID of the applicant for which details are requested.

### Response

- Status: 200 OK if the operation is successful, error status otherwise.
- Body: JSON response containing the detailed information about the specified applicant.
  - `country_code`: Country code of the applicant's mobile number.
  - `mobile_no`: Mobile number of the applicant.
  - `user_email`: Email address of the applicant.
  - `user_type`: Type of the user (job seeker).
  - `language`: Preferred language of the applicant.
  - `first_name`: First name of the applicant.
  - `last_name`: Last name of the applicant.
  - `full_name`: Full name of the applicant (concatenation of first and last name).
  - `date_of_birth`: Date of birth of the applicant.
  - `about`: Description or information about the applicant.
  - `gender`: Gender of the applicant.
  - `location`: Location ID of the applicant.
  - `location_name`: Name of the location where the applicant resides.
  - `work_position`: Current position or job title of the applicant.
  - `work_status`: Current employment status of the applicant.
  - `profile_img`: Profile image of the applicant.
  - `identity_type`: Type of identity document the applicant possesses.
  - `identity_card`: Identity card number of the applicant.
  - `skills`: Skills possessed by the applicant.
  - `known_language`: Languages known by the applicant.
  - `resume`: Link or attachment to the applicant's resume.
  - `open_to_work`: Indicates whether the applicant is open to work.
  - `available_to_join`: Availability of the applicant to join a new position.
  - `employmentData`: Array of employment history data for the applicant.
  - `educationData`: Array of education history data for the applicant.
  - `certificateData`: Array of certificate or qualification data for the applicant.
  - `deleted`: Indicates whether the applicant's account is deleted.

### Validation

- The `applicant_id` parameter must be a valid MongoDB ObjectId.
- The request must be made by an authorized user who is not a job seeker.
- If the requested applicant does not exist, an appropriate error message is returned.

### Notes

- This endpoint allows authorized users to view detailed information about a specific job applicant.
- The API performs validations to ensure data integrity and authorization.
- If the requested applicant does not exist, an appropriate error message is returned.

---
### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": [
        {
            "_id": "65c9b66029033adf0860f8f9",
            "country_code": "+66",
            "mobile_no": "888888888",
            "first_name": "Test Case Job",
            "last_name": "Test Case Seeker",
            "user_email": "owner@gmail.com",
            "user_type": 1,
            "language": 1,
            "deleted": false,
            "employmentData": [
                {
                    "_id": "65c9b8adb1daa6a292a7e3df",
                    "currently_employed": false,
                    "job_title": "Test Case Software Engineer",
                    "company_name": "Test Case ABC Inc.",
                    "work_from": "2019-01-01T00:00:00.000Z",
                    "work_to": "2019-05-23T00:00:00.000Z",
                    "exp_year": 0,
                    "exp_month": 4,
                    "work_description": "Working on web development projects"
                }
            ],
            "educationData": [
                {
                    "_id": "65c9b77c58f72def2dcdb76f",
                    "education_type": 2,
                    "institute": "VNSG",
                    "course": "B",
                    "specialization": "Gujarat",
                    "duration_from": "2020-06-15T00:00:00.000Z",
                    "duration_to": "2023-04-10T00:00:00.000Z",
                    "grading": "89"
                }
            ],
            "certificateData": [
                {
                    "_id": "65c9b781b005784000ca60c5",
                    "certificate_name": "Degree_1",
                    "file_url": "images/certificate.text"
                },
            ],
            "full_name": "Test Case Job Test Case Seeker",
            "date_of_birth": "1995-11-25T00:00:00.000Z",
            "about": "I am Jobseeker",
            "gender": 1,
            "location": "65bb44cdc384371c9b8f3376",
            "location_name": "Bangkok, Thailand",
            "work_position": "Supervisor",
            "work_status": 2,
            "profile_img": "1706529737205_eb411d0102e4a8d022362810cbbcd1cd.jpeg",
            "identity_type": 1,
            "identity_card": "images/id_card.jpeg",
            "skills": [
                "Supervision",
                "Data analysis",
                "Management"
            ],
            "known_language": [
                "Gujarati",
                "English",
                "Thai"
            ],
            "resume": "valid_resume_data",
            "open_to_work": true,
            "available_to_join": 2
        }
    ],
    "msg": "Applicant data"
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

Job post does not exist

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Applicants not found"
}
```



# Application Status Update API

## Endpoint

`GET /api/job/application/:_id/:status`

This endpoint updates the status of a job application.

### Request

#### Parameters

- `_id`: The ID of the job application for which the status is to be updated.
- `status`: The new status to be applied to the job application.

### Response

- Status: 200 OK if the operation is successful, error status otherwise.
- Body: JSON response indicating the result of the operation.
  - If successful, the response contains an empty object and a success message.
  - If unsuccessful, the response contains an empty object and an error message.

### Validation

- The `_id` parameter must be a valid MongoDB ObjectId.
- The `status` parameter must be a numeric value.
- The status value must be within the range of 1 to 4.
- The request must be made by an authorized user who is not a job seeker.
- If the specified application does not exist, an appropriate error message is returned.
- If an invalid status is provided, an appropriate error message is returned.

### Notes

- This endpoint allows authorized users to update the status of a job application.
- The API performs validations to ensure data integrity and authorization.
- Possible status values are:
  - 1: Application received
  - 2: Application under review
  - 3: Application accepted
  - 4: Application rejected

---
### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {},
    "msg": "Application status updated"
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```




# Job Jobseeker List API

## Endpoint

`POST /api/search-job-jobseeker/list/:type/:start/:limit`

This endpoint retrieves a list of jobs or job seekers based on the specified type, start index, and limit.

### Request

- Headers
  - `authorization`: Authorization token for the authenticated user.

- Parameters
  - `type`: Type of the list to retrieve. Should be numeric. `1` for job list, `2` for job seeker list.
  - `start`: Index of the first item to retrieve.
  - `limit`: Maximum number of items to retrieve.

- Body
  - `job_title` (optional): Search keyword to filter jobs or job seekers.

### Response

- Status: 200 OK if the operation is successful, error status otherwise.
- Body: JSON response containing the list of jobs or job seekers.
  - If the type is `1` (job list), the response includes details of jobs matching the search criteria.
  - If the type is `2` (job seeker list), the response includes details of job seekers matching the search criteria.
  - The response contains details such as job title, salary, description image, business name, business logo, job location, created at, updated at, user name, mobile number, email, profile image, and skills.
  - The response also includes pagination information such as total count and the subset of items based on the start and limit parameters.

### Notes

- This endpoint allows retrieving a list of jobs or job seekers based on specified criteria.
- The API performs authorization to ensure that only authenticated users can access the list of jobs or job seekers.
- The type parameter determines whether to retrieve a list of jobs or job seekers.
- The start and limit parameters control pagination of the results.
- Jobs or job seekers can be filtered based on the job title using the optional job_title parameter.

---

### Request Body
```json
{
   "job_title": "test",
   "city": "65bb44cdc384371c9b8f3376",
   "business_id": "65bc8b03ee10fd14593b0cf"
}
```

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_job": 3,
        "job_list": [
            {
                "_id": "65bc9ab731e4bb6a9aed7d63",
                "job_title": "Test General Manager",
                "salary": 0,
                "description_img": "images/photo.jpeg",
                "created_at": "2024-02-02T07:33:11.689Z",
                "updated_at": "2024-02-02T07:33:11.689Z",
                "business_name": "Thai Bar",
                "business_logo": "images/photo.jpeg",
                "job_location": "Bangkok, Thailand"
            },
            {
                "_id": "65bcc00f2214cb459d0f0ade",
                "job_title": "Test HR Manager",
                "salary": 0,
                "description_img": "images/updated_photo.jpeg",
                "created_at": "2024-02-02T10:12:31.801Z",
                "updated_at": "2024-02-02T10:12:32.659Z",
                "business_name": "Thai Bar",
                "business_logo": "images/photo.jpeg",
                "job_location": "Bangkok, Thailand"
            },
        ]
    },
    "msg": "The job list has been successfully fetched."
}
```


### Request Body
```json
{
   "job_title": "test",
   "city": "65bb44cdc384371c9b8f3376"
}
```

If business does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "Sorry, the business does not exist."
}
```


### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_jobseeker": 6,
        "jobseeker_list": [
            {
                "_id": "65bc8a08ee10fd14593b0ce8",
                "user_id": "65c9b66029033adf0860f8f9",
                "user_name": "Test Case Job Test Case Seeker",
                "mobile_no": "+66 888888888",
                "user_email": "owner@gmail.com"
            },
            {
                "_id": "65c1c0228e4dc376f478a110",
                "user_id": "65bc8a08ee10fd14593b0ce5",
                "user_name": "Test Chaisom Test Anand",
                "mobile_no": "+66 111111111",
                "user_email": "job_seeker@gmail.com"
            },
        ]
    },
    "msg": "Jobseeker list found."
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

Job post does not exist

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "Applicants not found"
}
```

User does not have permission for applicant list:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not member of this business"
}
```




# Job Jobseeker List API

## Endpoint

`GET /api/job/jobseeker/list/:business_id/:jobseeker_id/:start/:limit`

This endpoint retrieves a list of jobs for a specific job seeker associated with a particular business.

### Request

- Headers
  - `authorization`: Authorization token for the authenticated user.

- Parameters
  - `business_id`: ID of the business for which the jobs are being retrieved.
  - `jobseeker_id`: ID of the job seeker for whom the jobs are being retrieved.
  - `start`: Index of the first item to retrieve.
  - `limit`: Maximum number of items to retrieve.

### Response

- Status: 200 OK if the operation is successful, error status otherwise.
- Body: JSON response containing the list of jobs for the specified job seeker and business.
  - The response includes details of each job, such as job title, salary, description image, created at, updated at, active status, promoted status, location, and whether the job has been applied for by the job seeker.
  - The response also includes pagination information such as total count and the subset of items based on the start and limit parameters.

### Notes

- This endpoint allows retrieving a list of jobs for a specific job seeker associated with a particular business.
- The API performs authorization to ensure that only authenticated users can access the list of jobs.
- The business_id parameter specifies the business for which the jobs are being retrieved.
- The jobseeker_id parameter specifies the job seeker for whom the jobs are being retrieved.
- The start and limit parameters control pagination of the results.

---

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_job": 4,
        "job_list": [
            {
                "business_name": "Thai Bar",
                "_id": "65bc9a4f31e4bb6a9aed7d5b",
                "job_title": "Test Case Manager",
                "salary": 30,
                "description_img": "images/photo.jpeg",
                "created_at": "2024-02-02T07:31:27.815Z",
                "updated_at": "2024-02-21T11:23:38.917Z",
                "active": false,
                "promoted": false,
                "location": "65bb44cdc384371c9b8f3376",
                "location_name": "Bangkok, Thailand",
                "applied": true
            },
            {
                "business_name": "Thai Bar",
                "_id": "65bcc0d22f9b1c63c84a02c4",
                "job_title": "Test Case HR Manager",
                "salary": 0,
                "description_img": "images/photo.jpeg",
                "created_at": "2024-02-02T10:15:46.854Z",
                "updated_at": "2024-02-02T10:15:46.854Z",
                "active": true,
                "promoted": false,
                "location": "65bb44cdc384371c9b8f3382",
                "location_name": "Chumphon, Thailand",
                "applied": false
            },
        ]
    },
    "msg": "Here is the list of available jobs."
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

if Jobseeker not found:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "No jobseeker list found."
}
```

User does not have permission for applicant list:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not member of this business"
}
```





# New Application List API

## Endpoint

`GET /api/job/new-application/list/:business_id/:start/:limit`

This endpoint retrieves a list of jobs along with the count of new applications for each job within a specified business.

### Request

- Headers
  - `authorization`: Authorization token for the authenticated user.

- Params
  - `business_id`: The ID of the business for which the job applications are to be fetched.
  - `start`: The starting index of the jobs to retrieve (pagination).
  - `limit`: The maximum number of jobs to retrieve (pagination).

### Response

- Status: 200 OK if the operation is successful, error status otherwise.
- Body: JSON response containing the list of jobs with new application counts.
  - The response includes metadata such as the total number of jobs (`total_job`) and a list of job objects (`job_list`).
  - Each job object contains details such as `job_title`, `salary`, `description_img`, `created_at`, `updated_at`, `active`, `promoted`, `new_application`, `location`, and `location_name`.
  - Pagination is supported based on the `start` and `limit` parameters.
  - If no jobs are found for the specified business, an appropriate error message is returned.

### Notes

- This endpoint requires authentication via the `authorization` header.
- The `business_id` parameter must be a valid MongoDB ObjectID with a minimum length of 24 characters.
- Pagination is implemented to efficiently handle large datasets.
- The endpoint fetches jobs along with the count of new applications for each job within the specified business.
- Proper error handling is implemented to handle scenarios such as unauthorized access, invalid input, or database errors.

---
### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_job": 1,
        "job_list": [
            {
                "business_name": "Thai Bar",
                "_id": "65bc9ab731e4bb6a9aed7d63",
                "job_title": "Test General Manager",
                "salary": 0,
                "description_img": "images/65bc9ab731e4bb6a9aed7d63.jpeg",
                "created_at": "2024-02-02T07:33:11.689Z",
                "updated_at": "2024-02-02T07:33:11.689Z",
                "active": true,
                "promoted": false,
                "new_application": 0,
                "location": "65bb44cdc384371c9b8f3376",
                "location_name": "Bangkok, Thailand"
            }
        ]
    },
    "msg": "Here is the list of available jobs."
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

User does not have permission for applicant list:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "You are not member of this business"
}
```





# Job Application Status API

## Endpoint

`GET /api/job/application-status/:business_id/:status/:start/:limit`

This endpoint retrieves a list of job applicants based on their application status for a specific business.

### Request

- Headers
  - `authorization`: Authorization token for the authenticated user.

- Params
  - `business_id`: The ID of the business for which the applicant list is requested.
  - `status`: The status of the applications to filter (optional). If not provided, all applications are considered.
  - `start`: The starting index of the applicant list (optional, default is 1).
  - `limit`: The maximum number of applicants to retrieve (optional, default is 10).

### Response

- Status: 200 OK if the operation is successful, error status otherwise.
- Body: JSON response containing the list of applicants based on the specified criteria.
  - The response includes information about each applicant, such as their name, contact details, application status, etc.
  - If no applicants are found based on the provided criteria, an appropriate error message is returned.
  - If the provided business ID is invalid or the user does not have permission to access the business, appropriate error messages are returned.
  - Proper error handling is implemented to handle scenarios such as unauthorized access, invalid input, or database errors.

### Notes

- This endpoint requires authentication via the `authorization` header.
- The `status` parameter is optional. If provided, only applicants with the specified status are retrieved.
- Both `business_id` and `status` parameters must be valid MongoDB ObjectIDs (with a minimum length of 24 characters) and numeric status values between 1 and 5.
- Pagination is supported through the `start` and `limit` parameters to control the number of applicants returned.
- The response includes the total number of applicants and a subset of the applicant list based on the provided `start` and `limit`.
- The endpoint checks if the business exists and if the authenticated user is a member of the business before fetching the applicant list.

---
### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 0,
    "data": {
        "total_applicant": 2,
        "applicant_list": [
            {
                "_id": "65bc9ab731e4bb6a9aed7d63",
                "job_title": "Test General Manager",
                "applicant_id": "65c9b66029033adf0860f8f9",
                "user_name": "Test Case Job Test Case Seeker",
                "mobile_no": "+66 888888888",
                "user_email": "owner@gmail.com",
                "profile_img": "1706529737205_eb411d0102e4a8d022362810cbbcd1cd.jpeg",
                "skills": [
                    "Supervision",
                    "Data analysis",
                    "Management"
                ],
                "application_id": "65dd907020139478b8dfe7c5",
                "applied_date": "2024-03-01T00:35:19.941Z",
                "status": 3
            },
            {
                "_id": "65bcc00f2214cb459d0f0ade",
                "job_title": "Test HR Manager",
                "applicant_id": "65bc8a08ee10fd14593b0ce5",
                "user_name": "Test Chaisom Test Anand",
                "mobile_no": "+66 111111111",
                "user_email": "job_seeker@gmail.com",
                "profile_img": "1706529737205_eb411d0102e4a8d022362810cbbcd1cd.jpeg",
                "skills": [
                    "Supervision",
                    "Data analysis",
                    "Management"
                ],
                "application_id": "65ddd007eee9c37165859d88",
                "applied_date": "2024-02-27T12:05:27.311Z",
                "status": 3
            }
        ]
    },
    "msg": "List of applicants."
}
```

User does not exist

```json
{
    "status": 401,
    "err": 1,
    "data": {},
    "msg": "User does not exist"
}
```

If not found any  application:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "No applicants found."
}
```





---
title: Promote Job Post API Documentation
---

## Endpoint

`POST /api/job/promote/:job_id`

This endpoint allows users to promote a job post.

### Request

- Headers
  - `authorization`: Authorization token for access.
- Parameters
  - `job_id`: ID of the job post. Should be a valid 24-character ID.

### Response

- Status: 
  - 200 OK if the operation is successful.
  - Error status codes for failures.
- Body: JSON response indicating the result of promoting the job post or an error message.
  - If the job post is successfully promoted, a success message is returned.
  - If the job post is already promoted or other errors occur, an error message is returned.

### Notes

- This endpoint requires authentication via the `authorization` header.
- The request parameter should include the ID of the job post to be promoted.
- Promotion of a job post is subject to conditions such as the user being a member of the business, subscription plan validity, etc.
- Error messages are returned for scenarios such as user not existing, job post not existing, user not being a member of the business, subscription plan expired, etc.

### Response

#### Successful Response:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "The job has been promoted successfully."
}

```

If job promoted once:

```json
{
    "status": 200,
    "err": 1,
    "data": {},
    "msg": "The job has been promoted once."
}
```